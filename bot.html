<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math Buddy - Glass</title>
<style>
  body {
    margin:0; background:linear-gradient(135deg,#0f172a,#1e293b,#334155);
    color:white; font-family:'Poppins',sans-serif; 
    display:flex; justify-content:center; align-items:center; height:100vh;
  }
  .chatbox {
    width:420px; max-width:90%;
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.15);
    backdrop-filter:blur(20px);
    border-radius:24px; padding:20px;
    box-shadow:0 8px 32px rgba(0,0,0,0.4);
    display:flex; flex-direction:column;
    animation:fadeIn 0.6s ease;
  }
  .messages {
    flex:1; overflow-y:auto; max-height:420px; padding:10px;
    display:flex; flex-direction:column; gap:10px;
  }
  .msg {
    padding:10px 14px; border-radius:18px;
    max-width:75%; word-wrap:break-word; line-height:1.4;
    animation:pop 0.3s ease;
  }
  .user {align-self:flex-end; background:#3b82f6; box-shadow:0 3px 6px rgba(0,0,0,0.3);}
  .bot {align-self:flex-start; background:#22c55e; box-shadow:0 3px 6px rgba(0,0,0,0.3);}
  .input-area {display:flex; gap:10px; margin-top:15px;}
  .input-area input {
    flex:1; padding:12px 14px; border:none; border-radius:12px; outline:none;
    background:rgba(255,255,255,0.1); color:white;
  }
  .input-area button {
    padding:12px 18px; border:none; border-radius:12px; cursor:pointer;
    background:linear-gradient(135deg,#2563eb,#3b82f6);
    color:white; font-weight:bold; transition:0.3s;
  }
  .input-area button:hover {transform:scale(1.05);}
  .score, .timer {text-align:center; font-weight:bold; margin-top:5px;}
  @keyframes fadeIn {from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);}}
  @keyframes pop {from{opacity:0;transform:scale(0.9);} to{opacity:1;transform:scale(1);}}
</style>
</head>
<body>
<div class="chatbox">
  <div class="messages" id="messages"></div>
  <div class="score" id="score">Score: 0 | Questions: 0 | Level: Easy</div>
  <div class="timer" id="timer">Time left: 10s</div>
  <div class="input-area">
    <input type="text" id="userInput" placeholder="Type your answer...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
const messages=document.getElementById("messages");
const scoreBox=document.getElementById("score");
const timerBox=document.getElementById("timer");
let currentQuestion="", correctAnswer=null;
let score=0, total=0, level="Easy";
let timeLeft=10, timer=null;

function addMessage(text,type){
  const div=document.createElement("div");
  div.className="msg "+type;
  div.innerText=text;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
}

function updateLevel(){
  if(score < 5) level="Easy";
  else if(score < 10) level="Medium";
  else level="Hard";
}

function updateScore(){
  updateLevel();
  scoreBox.innerText=`Score: ${score} | Questions: ${total} | Level: ${level}`;
}

function getTimeForLevel(){
  if(level==="Easy") return 10;
  if(level==="Medium") return 7;
  return 5;
}

function startTimer(){
  clearInterval(timer);
  timeLeft=getTimeForLevel();
  timerBox.innerText=`Time left: ${timeLeft}s`;
  timer=setInterval(()=>{
    timeLeft--;
    timerBox.innerText=`Time left: ${timeLeft}s`;
    if(timeLeft<=0){
      clearInterval(timer);
      addMessage(`‚è≥ Time's up! The correct answer was ${correctAnswer}.`,"bot");
      correctAnswer=null;
      setTimeout(askQuestion,1500);
    }
  },1000);
}

function askQuestion(){
  let a,b,op;
  const operators=["+","-","*","/"];
  const isAlgebra = Math.random() < 0.3;

  if(isAlgebra){
    a=Math.floor(Math.random()*10)+1;
    b=Math.floor(Math.random()*10)+1;
    const type=Math.floor(Math.random()*3);
    if(type===0){ correctAnswer=b-a; currentQuestion=`Solve for x: x + ${a} = ${b}`; }
    else if(type===1){ correctAnswer=b/a; currentQuestion=`Solve for x: ${a}x = ${b}`; }
    else { let c=Math.floor(Math.random()*10)+1; correctAnswer=(c+b)/a; currentQuestion=`Solve for x: ${a}x - ${b} = ${c}`; }
  } else {
    if(level==="Easy"){ a=Math.floor(Math.random()*10)+1; b=Math.floor(Math.random()*10)+1; }
    else if(level==="Medium"){ a=Math.floor(Math.random()*20)+5; b=Math.floor(Math.random()*20)+5; }
    else { a=Math.floor(Math.random()*50)+10; b=Math.floor(Math.random()*50)+10; }
    op=operators[Math.floor(Math.random()*operators.length)];
    if(op==="/"){ correctAnswer=a; currentQuestion=`${a*b} √∑ ${b}`; }
    else if(op==="*"){ correctAnswer=a*b; currentQuestion=`${a} √ó ${b}`; }
    else if(op==="-"){ correctAnswer=a-b; currentQuestion=`${a} - ${b}`; }
    else { correctAnswer=a+b; currentQuestion=`${a} + ${b}`; }
  }

  total++;
  updateScore();
  addMessage(`What is ${currentQuestion}?`,"bot");
  startTimer();
}

function sendMessage(){
  const input=document.getElementById("userInput");
  const text=input.value.trim();
  if(!text) return;
  addMessage(text,"user");
  input.value="";
  setTimeout(()=>processAnswer(text),300);
}

function processAnswer(text){
  if(correctAnswer!==null){
    let userAns=parseFloat(text);
    clearInterval(timer);
    if(userAns===correctAnswer){
      addMessage("‚úÖ Correct! üéâ","bot");
      score++;
    } else {
      addMessage(`‚ùå Wrong! The correct answer is ${correctAnswer}.`,"bot");
    }
    updateScore();
    correctAnswer=null;
    setTimeout(askQuestion,1500);
  } else {
    addMessage("Type 'start' to begin!","bot");
  }
}

addMessage("üëã Hi! I'm your Math Buddy. Let's start!","bot");
setTimeout(askQuestion,1500);
</script>
</body>
</html>
